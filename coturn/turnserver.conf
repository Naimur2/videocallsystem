# CoTURN Configuration for MediaSoup Video Call
# Optimized for WebRTC and MediaSoup integration

# Listening ports
listening-port=3478
tls-listening-port=5349

# Relay ports range (matching docker-compose port mapping)
min-port=49152
max-port=49200

# Server identity (will be overridden by environment variables)
server-name=${TURN_REALM:-meeting.naimur-rahaman.com}
external-ip=${EXTERNAL_IP:-3.127.66.162}
realm=${TURN_REALM:-meeting.naimur-rahaman.com}

# WebRTC optimizations
fingerprint
mobility
no-multicast-peers
no-loopback-peers

# Authentication
lt-cred-mech
user=mediasoup:mediasoupTurn2024!

# Security settings for production
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255

# Logging (essential for debugging)
log-file=/var/log/coturn/turnserver.log
simple-log

# Process management
pidfile=/var/run/coturn/turnserver.pid
no-cli

# Production optimizations
prod
no-stdout-log

# STUN only mode disabled (we need TURN for NAT traversal)
stun-only=false

# Protocol settings
no-udp-relay=false
no-tcp-relay=false